defmodule Helpers.Test do
  use ExUnit.Case, async: false

  describe "pow/2" do
    test "returns 1 for 0^0" do
      assert Helpers.pow(0, 0) == 1
    end

    test "returns 1 for 1^0" do
      assert Helpers.pow(1, 0) == 1
    end

    test "returns 0 for 0^1" do
      assert Helpers.pow(0, 1) == 0
    end

    test "returns 1 for 1^1" do
      assert Helpers.pow(1, 1) == 1
    end

    test "returns 1 for 1^2" do
      assert Helpers.pow(1, 2) == 1
    end

    test "returns 666^5391 for 666^5391" do
      # This case was causing problems for `:math.pow/2` so we test it here.
      # The right hand side of the assert was computed using Wolfram Alpha.
      assert Helpers.pow(666, 5391) == 223650285596247883597886107282232323962671768810595829950145971092692904433572361229026257163075093938509539754030540640824146945018662792238572491590861127119025065205395914812207345022068005489454413779739863659754080053293854686263654520195394288102797647106275128288614966020848153449507908716222514119987046665161152143914165557278297724171755665152328210051940463172705921142669994745655469206417260663576708515266332366540430068917149690479178966449721885399545865428280254432996943508301609152074221722515011408493871316275240871303409142978816798092319801940313862730667764994771925516835873938131788542307146580342258264083130953436619175438596061250718586045262723081769902201510201845182246433891835435383241796604896276804308122578865155250131551169062771698032282504789169481881576892071870678948891873853669575016926484255515164881622954040920942764969942198455812021396003398863740147200206800796387608787542900026182613108007882865907515691033607916805049387259768387707885042932632085514327569912070655140538049874300971541391673206308866253796978721937253154389055725107959779871137825460918723055734650882900468441396139667416077856052751624156499305536674228225485892381476965021461883678014176317814058568180920048780799515985982325771341839065652597030083235801421330183009167973137849953244427320591368957355079830475228088610432815670767968202071574413894261256579634605115459552509253372937030553901892513451325128020156137322284678243233473869924408255233295138943561985962798735764303311358570850028140990847820329794029340862555084125892007740681726159704866175578290857670695520226985881509983861871435738808884583784784615562778543246036843368347274924488718927755143778144505387212747119891968913111259739554817468559242290702559196320248002853426445584374188079314334394542962620162354720527230214535103132507454658454992681227815766792190683650850536693219938351276273590391000018937551146100718020285649794306473056403599249517563019133171028488653472850639997227134687991609110636742892169698319355170753535543098770506581686507953498674319018887214556126408722389000336718725116954220266120409002148264630440906644432805338683063029559114504026032226774055167122696822876764566030642276605486830111832749722084674131855217306658641131395280067005529486099529713321519488063964470166356468627243893330047345724540228407994903965513753945558169439883971908537704071407639137074750469737541652293416317175025873478745491725407118168430917609827403882928751989265756975869236351697785964202630928707495427552966005444531153931993126902504556326727726513055228677287457930567623484289228524615810611197721955091434303613964678937147051117231557231882353276734034560721514549306989412545134053269360348889478704488833770739765084436109599189477188930678439588043351650540554726252548944217483247833007828904860944923771751813801587131228975930334683981370624067638047402796912567180334541810553682933018928970284833710620683884304607876271350070767277107796215932637319072228701746942839060541374460750796988178866048858152827010974651076180312961783416055885075158794856725314892002272968073230910619412460089288180797442652010158576399052683736704409046121574795397294321748350539681553124228296649355400668798610723742651557943786189703320339155377224358276670275917168778060951147313403902110697345666983179158586759004960130874674962378170025240695431779691101004206998662639293805453091797396346433562585966900998728536520711401306759045969392590382049374289098631670823781089776960865594537899760019323492685824160993840861095303184540937255705047450940847004945760693786451391693000062469563064058296970285234764651884855125459911996232786349463114411466479336385179991760328824528176284105905961698919152723374057041751204709516051713723823327005672565795783112666386817367537404712893038879413672658213511167009500369480466925919747715526345913586721275779285911845360149320755379978332742313463562077048821533526058422375253651348151918394984905070304464240681210733303467596304919392367222647066913943439397931693636435693680652460867515781986846302285196147689303308918789321304194346167642268427458311082751485175386207010464756253643468573154609244841707336720709893728912920305999329413607738461957802382738549503161650013199434033836585188645262727583549805630094256459891494179232448503715064327040977096570237696952322475646115781140054861612641831626232943738472127448538348037382560468808959058833146347275504337457536911217599545424559065733911316663665189458460920285247727333171991723844859031582760774348760853962386829103560500490034587681905683998149626236512635032808103041036769803829735615853827855070892782199359258463733243991471685770683766715429984773039306792215181038203926116296004285977439638424491713140724625911230084397794146787041763402900604175498827414339554833185740153763209493981973864938604538262076973950972194665652228017019002481482161109017983163227679468992745949017699121520000308428250912155611789934142007473297557695499581952157026083803254836418011685181145871793756875456574809946803263074331151702221490066747676426501370297191368658691547594104302805331881824667021122365158099546320643393816597174567713029458749688430022060837872203748726614381129325158366172866965720674493063068469028140365611245967811061674019179236559310967441711195475639978430664204650578561811256564271466029837221096858989760181299663762416014236401350683810529329706266982546667493772025872148031132569170365039036097575546993603223125085790909974108015846933653970058275540674511135725992522727905773191821857905150319231440186286186700218901803021849898955213963234717708294856895741253381852314295951845113016585308219227583085989485319161206399669015808174481400741427665529922861212699188903293518308818807857028911067960559585924021827762560436170676103716915775860378500732688844219199991022638534648330572994398107173026288311230354495130550934533773342522417445951508333255759006570745798962603999753187770009121858570453645799511554669133663863074102827440275126464430513868929726757836963496645296012472954708230671871798135030296902063575899770269611761084709085978220790859001699628778156031979770913118742172864952629509575119219683526639345041678792169566732220384012319263238146785386814047546696994626572293420021384107669862589848440117512476339348953704111334784932364091258951106635536124021548879432782746750562358696254100066039728075822102144163464982574984915371046097850748207268698036119574664584256872072608273194593037169332179444957261840660957234365569861566036462950556399778022149758616156721191343020197843040840127629923043802045534246499975653921918532722459062700215499865325265195206323590604042950632235693592381367551895677689249755031402971241465146098910751439364560688167036979423739824538396789502224599497456668596974860092031905719584755539861683672294872900483058771455456594877805121289680499488723385752761392511279247600547585910878308122876965898632126545479768262909352872074095506944303218022318540962701847539585222350135727344619552054202853773606201028190777921719149837880158787259260665082630723657228692350927172353348847253760172744386129290094606478145119404228907269735399635179249502209871462146636268837973202479576409050330448817460898148099732841312201048021366574067871824091954808719433929204827072577148057174281850798098546285625044969873645827414591611570372641282151026600113979423152500746253107697927233698194833065885361101961587728024209274558231106468945614315944362719651867617840797661834309127304392261511875780938799722337098947287961294213600411011717238426328393749492512346188371990641365798262875298962423840686618748894687068255396641460125883043748067494069229278618738365655976955359911362644956585961436313182044724063972194795633354108753339620169144794910530604625640387311005176353916585137971819412195230734467029846445995726746301309653964866568120703187644004207403891969689433345802867417408678262258772912371674860232711118083923259034202845227127864557941194327842817058640213769320572208790025951893886989844234668209421677040731257709650160027973553893584443975267843350035842466371624206584640480748359889648317357951335756118974470311641656060083428564881657784581979499317315221646750093101803560047059473480384192960913370852602352925471831878219601646812929669564177626198285018017915212216080551727081178657991304687552945596877113831772554411674506567280165222340729045680181242392461646693842679424321208129225380738664962086849972598995365178320931329626066398022871013830782855705309873055459272913666277408873766398158524658470999861432099316609227353951186183332057109488118836363750714577396657396510429513729407165643862271047887880708028289735553912226050056904066503602948712907585684628695664086264276456153243550773157742857331997385044251919897920229321953870440021275974343523482862899318691495283043024666563644610726529906102625028200136816860039448725769215605611211328660432400545979786171069367542919227647102943315469850881284015096030696148852314808015518762576018515151773497625818282173023412725721330852574649802176632854198878820580150420678209303405869005163025865333998183523164020448083211842589851185698339598797418198472635701671625043795896032275995428467806018203447506718521761077050119277462841499750834823566300081461090143381462642172948434654335998640787794931333515323470943913123990965414293798476313312897856032574510391752497291831044170348765039838387073889911354611946962360315556650978631209329294438089333413056753958759619399585890209996467568358066549240374220711199205676590679683335929717134605425343909818264264483963880190598654575809550639748587054915917824485925749884735072912729910058125735300287656056659788905939329139526740116854287099929056307050821918566085825517151904407685596947307467153063428868648690118496475939900195922799584900005101829608827770991558899147105916530029301960430438686638348096113285363459925416578501278564258210183834941316466050017904192497251119322511930818403641420609458331199540769508046297368587639720299631523466091838100160630273083789851893890481259267662559141430251807835082530022032251059644913177827983000790617932319979374503076146014815132631725222906401766236728319491328131783293912745159658865127635163814954147524331132078419645944297438716117428205250352662806267646057405594875205608639861702759427711436882036215083291333473895981538923764245147738246658128627784098464054403763718422159862533161092121884743642930035951451219650760547303662419520051623465319731502419181799325969171856639529722126170984429795686927338900362183788024338741844393732434073201618467121790420165251186016058627357081263722956932985509687384678748427259588348604561825468117713711666796424601905698060972513291531112171243765750254991845578195279284749671838070328020005511228724714756824866656531115842459300740611878927254297157785233159379163437775191034078431894115601661684354893747339897878056611687450707116025148668114777690246633886907434205797242756238390889396180088533189748510741532643028260230620502203997286510211384848898254187607235368993023481436489744221094696929466366052008389113370896038727619318599496057189076896755554764519288591529589286006332217131430056081555847480086455108505854203226704873345627276633723126582615330517394358266896560654212374171394792620516200963879246411662685047537726333497253518236474798089093069551541266638861372107799435605951656171200865343798649270695203212245185365045441210635781509882595132376129870778338730394845141526248189892935176874561878969805319394027188649841710267732680546418506166040907081286899687416996827933969246921785168860479044083868604843022899920296751257386203686090666694406064912102588667799238197208191841948774192131435362455721898723508506882255349673348104835295430706606994986363878611792713253572257701216422271247495422852480942840355006963070231294941499268200478289798363940990036416324906872969967446739873858249703830551392055175469297010529447561398371631827949094710290798522959765100933597467717388360910196369331376876935938977300507419610306260306760385256146745344874956944959628144601544884305984945964077925221396850158515324645413674683456396298932684636960453663475086406253860907500202712507991115560451903633844751070554244289907945237506193203289670694543966501263617835847206885559881936082098934430545260510025200970919544732503212795994857969512301123847439368034821358675431608772047451346471098420591032042410072938914417841851766898894600395589813091713975487804345685480608176784340347660464889660442195319368040037540998117560199745808788813771899032055565166142220841830234782383108042876063850145052423054444005431769616370780139612259627521279109374726251317490539150517044227746036512496694296139120653181324953391233712073423202867046455188218202525395301395504791412828702454022729101954165874779048541485360645204252856803551670319246000681554245110639735263717184190758311058206827386820521690692513460071064340851407614549306547551149686209859278262443541344710163446519046334810654568169128643298515790913452538223408142536097329365120999342023514192710063123636523950533000435375955333801769825277117591102196056004581103037892196747549691153953554908847401702173851321529108063878941941115001302388216335121162893951720910701445720506207569176241722646563847667566505621840475359819661112173557772954784206503534652987612580998731404925930107762297130329603333555556771380365305178975130112252795139863092971271717656119992993700840221037465663714333509770751478311507661835647193222409031454485956923953425501093453215284375008241283894254400815397953997039754039115940123140217989988953172573543408825948628911314784986251344287991728399697346396231494112688205367930749346964490567317045026179525680058544545428908336460990883624313080465507081239070071248687148433057406987270218625171240888877510320862004127559477435408940953559680163543963701605928215533566939886655359471112734979935331972492602105497276084682565276239803088349817802851529688145146704279856532143795288951001738728307159104902322743776801196190702739494631267212320483111861289638216765994633399648527066428801452069016733499580967933319327249091757064093973806058797719009849964040779075271281147493313919024623118935463722256057395468717041775150203549054838331540583448703566438374283645177892356021432265325917203600281038080791351839802645756083498459491876544636230479178559615017199262234675083186845758505497763146465494125012246565894973118336538432564727967893490107422236630897810786986874344219870593599552681329751088162584445390899960948038713763771413777695608010186201697739168011032360238000298012229806116971251635612549344967912889090881138952202208819042728331616579571597319524685444412058870634091844935289087984105282220388074290557289173797734879820807011915046040875065028295744546000506137337455389176110666696015753608421250890220700255736768309139452238549672360860968051478910523081598442928456701494948093539838376183541289599895689744099679606939008188321548131817799069866348268459366275026018007576024082029184391724997273259840638522752321195722637526805623302484501645055511869324993012463519439069038167840265145942016
    end

    test "returns 1 for 10^-1" do
      res = Helpers.pow(10, -1)
      assert_in_delta(0.1, res, 0.0001)
    end
  end
end
